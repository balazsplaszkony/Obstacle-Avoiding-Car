/*
 * car.c
 *
 *  Created on: 2023. m√°rc. 28.
 *      Author: plasz
 */


#include "car.h"
volatile UsartBuffer bluetooth_prompts;
Car car;
Car car_prev;

void InitComponents()
{
	InitUltrasonicMeasurement(&ultrasonic_measurement);
	InitOpticMeasurement(&optic_measurement);
	InitMotors();
	UsartBufferInit();
}

void InitCar()
{
	cardirection = STOPCAR;
	car.obstacle_avoidance = true;
	car.tempomat = false;
}

void ProcessPrompts()
{;

}

void SetDirection(Direction dir){
	if(car.direction != dir)
	{
		switch(dir)
		{
		case GOFORWARD: RotateForward(&motor_right); RotateForward(&motor_left); break;
		case GOBACKWARD: RotateBackward(&motor_right); RotateBackward(&motor_left); break;
		case TURNRIGHT: RotateForward(&motor_right); RotateBackward(&motor_left); break;
		case TURNLEFT: RotateBackward(&motor_right); RotateForward(&motor_left); break;
		case STOPCAR: StopMotors(&motor_right); StopMotors(&motor_left);break;
		default: break;
		}
		car.direction = dir;
	}
}
